From: Felix Fietkau <nbd@nbd.name>
Subject: pppoe: add extra padding for the header (useful for drivers that need headroom)

lede-commit 6517a757ec711fc3354b857e273e2621042f3c7a
Signed-off-by: Felix Fietkau <nbd@nbd.name>
---
 drivers/net/ppp/pppoe.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

--- a/drivers/net/ppp/pppoe.c
+++ b/drivers/net/ppp/pppoe.c
@@ -863,14 +863,14 @@
 
 	hlen = LL_RESERVED_SPACE(dev);
 	skb = sock_wmalloc(sk, hlen + sizeof(*ph) + total_len +
-			   dev->needed_tailroom, 0, GFP_KERNEL);
+			   dev->needed_tailroom + NET_SKB_PAD, 0, GFP_KERNEL);
 	if (!skb) {
 		error = -ENOMEM;
 		goto end;
 	}
 
 	/* Reserve space for headers. */
-	skb_reserve(skb, hlen);
+	skb_reserve(skb, hlen + NET_SKB_PAD);
 	skb_reset_network_header(skb);
 
 	skb->dev = dev;
